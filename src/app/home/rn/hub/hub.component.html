<div>
    <h1 style="margin: 30px;">Hub SMS Form</h1>
    <form [formGroup]="hubForm" class="form-container">
        <mat-grid-list cols="12" rowHeight="fit" style="height: 250px;">
            <!-- level -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Level</mat-label>
                    <mat-select formControlName="level">
                        <mat-option *ngFor="let lev of level" [value]="lev.value">
                            {{lev.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- categories report -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Category For Report</mat-label>
                    <mat-select formControlName="categories_report">
                        <mat-option *ngFor="let cat_rep of categories_report" [value]="cat_rep.value">
                            {{cat_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- responsible area -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Responsible area</mat-label>
                    <mat-select formControlName="responsible_report">
                        <mat-option *ngFor="let res_rep of responsible_report" [value]="res_rep.value">
                            {{res_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- problem -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Problem</mat-label>
                    <input matInput type="text" formControlName="problem" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- Hub site -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Hub Site</mat-label>
                    <input matInput type="text" formControlName="hubSite" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- Type of Generator -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Type of generator</mat-label>
                    <mat-select formControlName="generator">
                        <mat-option *ngFor="let gen of generator" [value]="gen.value">
                            {{gen.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- effect option -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Эффект</mat-label>
                    <mat-select formControlName="effect_option">
                        <mat-option *ngFor="let eff_rep of effect_option" [value]="eff_rep.value">
                            {{eff_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- reason -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Reason</mat-label>
                    <input matInput type="text" formControlName="reason" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- region -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Region</mat-label>
                    <mat-select formControlName="region">
                        <mat-option *ngFor="let reg of region" [value]="reg.value">
                            {{reg.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- desc -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Description</mat-label>
                    <input matInput type="text" formControlName="desc" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- informed -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Informed</mat-label>
                    <input matInput type="text" formControlName="informed" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- category -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Category</mat-label>
                    <mat-select formControlName="category">
                        <mat-option *ngFor="let cat of category" [value]="cat.value">
                            {{cat.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list cols="12">
            <!-- powerOff Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Power Off Time</p>
                    <input 
                        type="datetime-local" 
                        class="dateTime" 
                        name="startTime" 
                        formControlName="powerOffTime"
                        min="2023-01-01T00:00"
                        [max]="time | date: 'yyyy-MM-ddTHH:mm'">
                </div>
            </mat-grid-tile>
            <!-- HubSiteBlock Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Hub Site Block Time</p>
                    <input 
                        type="datetime-local" 
                        class="dateTime" 
                        formControlName="hubBlockTime"
                        min="2023-01-01T00:00"
                        [max]="time | date: 'yyyy-MM-ddTHH:mm'">
                </div>
            </mat-grid-tile>
            <!-- start Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Start Time</p>
                    <input 
                        type="datetime-local" 
                        class="dateTime" 
                        name="startTime" 
                        formControlName="startTime"
                        min="2023-01-01T00:00"
                        [max]="time | date: 'yyyy-MM-ddTHH:mm'">
                </div>
            </mat-grid-tile>
            <!-- end Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>End Time</p>
                    <input type="datetime-local" class="dateTime" formControlName="endTime">
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <!-- additional information -->
        <mat-divider style="margin: 30px;"></mat-divider>
        <h1 style="margin: 20px 30px;">Additional Information</h1>
        <mat-grid-list cols="12" rowHeight="fit" style="height: 250px;">
           <!-- mw link -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>mw link</mat-label>
                    <input matInput type="text" formControlName="mw_link" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- mw_equipment -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>mw_equipment</mat-label>
                    <input matInput type="text" formControlName="mw_equipment" />
                </mat-form-field>
            </mat-grid-tile>
             <!-- mw_vendor -->
             <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>mw_vendor</mat-label>
                    <input matInput type="text" formControlName="mw_vendor" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- bts_vendor -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>bts_vendor</mat-label>
                    <input matInput type="text" formControlName="bts_vendor" />
                </mat-form-field>
            </mat-grid-tile>
             <!-- battery_life_time -->
             <mat-grid-tile colspan="3">
                <mat-form-field class="margin-container">
                    <mat-label>battery_life_time</mat-label>
                    <input matInput type="text" formControlName="battery_life_time" />
                </mat-form-field>
            </mat-grid-tile>
             <!-- low baterry ttime -->
             <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>low baterry ttime</p>
                    <input 
                        type="datetime-local" 
                        class="dateTime" 
                        name="startTime" 
                        formControlName="lowBatteryTime"
                        min="2023-01-01T00:00"
                        [max]="time | date: 'yyyy-MM-ddTHH:mm'">
                </div>
            </mat-grid-tile>
            <!-- DG start Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>DG start Time</p>
                    <input 
                        type="datetime-local" 
                        class="dateTime" 
                        formControlName="dg_start_time"
                        min="2023-01-01T00:00"
                        [max]="time | date: 'yyyy-MM-ddTHH:mm'">
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <!-- button -->
        <mat-grid-list cols="12">
            <mat-grid-tile colspan="1">
                <button class="form-button" mat-raised-button color="primary" type="button"
                    (click)="previewButton()" [disabled]="hubForm.invalid && newForm">Preview</button>
            </mat-grid-tile>
            <mat-grid-tile colspan="1">
                <button class="form-button" mat-raised-button color="primary" type="button"  *ngIf="newForm == false"
                    (click)="updateData()">Update</button>
                    <button class="form-button" mat-raised-button color="primary" type="button" *ngIf="newForm == true"
                    [disabled]="hubForm.invalid && newForm" (click)="createData()">Create</button>
            </mat-grid-tile>
            <mat-grid-tile colspan="3">
                <mat-chip-listbox formControlName="AddOrCor">
                    <mat-chip-option value="correction">Correction</mat-chip-option>
                    <mat-chip-option value="addition">Additional</mat-chip-option>
                </mat-chip-listbox>
            </mat-grid-tile>

        </mat-grid-list>
    </form>
    <!-- preview -->
    <div class="grid-container">
        <div class="grid-item" *ngIf="preview == true && hubForm.value.endTime == null">
            <mat-card>
                <mat-card-header>
                    <mat-card-title *ngIf="hubForm.value.categories_report == 'ПР'">{{hubForm.value.level.replace('A', 'П') + ' HUB sayt: Problema:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.categories_report != 'ПР'">{{hubForm.value.level + ' Problema:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Effekt: Poterya pokrytiya i kachestva svyazi v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime.replace("T", " ")}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime.replace("T", " ")}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime.replace("T", " ")}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Problem')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Problem')" type="submit" *ngIf="newForm == false">Send Message
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
        <div class="grid-item" *ngIf="previewResheniya == true && hubForm.value.endTime != null">
            <mat-card>
                <mat-card-header>
                    <mat-card-title *ngIf="hubForm.value.categories_report == 'ПР'">{{hubForm.value.level.replace('A', 'П') + ' HUB sayt: Resheniya:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.categories_report != 'ПР'">{{hubForm.value.level + ' Resheniya:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Opisanie: ' + hubForm.value.desc}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime.replace("T", " ")}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime.replace("T", " ")}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime.replace("T", " ")}}</p>
                    <p>{{'Konec: ' + hubForm.value.endTime.replace("T", " ")}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Reshenie')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Reshenie')" type="submit" *ngIf="newForm == false">Send Message
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
        <div class="grid-item" *ngIf="previewResheniya == true && hubForm.value.endTime != null">
            <mat-card>
                <mat-card-header>
                    <mat-card-title *ngIf="hubForm.value.categories_report == 'ПР'">{{hubForm.value.level.replace('A', 'П') + ' HUB sayt: Informacionnoe:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.categories_report != 'ПР'">{{hubForm.value.level + ' Informacionnoe:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Opisanie: ' + hubForm.value.desc}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime.replace("T", " ")}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime.replace("T", " ")}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime.replace("T", " ")}}</p>
                    <p>{{'Konec: ' + hubForm.value.endTime.replace("T", " ")}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Informacionnoe')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Informacionnoe')" type="submit" *ngIf="newForm == false">Send Message
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>