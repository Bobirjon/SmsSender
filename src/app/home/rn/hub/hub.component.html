<div>
    <h1 style="margin: 30px;">Hub SMS Form</h1>
    <form [formGroup]="hubForm" class="form-container">
        <mat-grid-list cols="12" rowHeight="fit" style="height: 250px;">
            <!-- level -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Level</mat-label>
                    <mat-select formControlName="level">
                        <mat-option *ngFor="let lev of level" [value]="lev.value">
                            {{lev.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- categories report -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Category For Report</mat-label>
                    <mat-select formControlName="categories_report">
                        <mat-option *ngFor="let cat_rep of categories_report" [value]="cat_rep.value">
                            {{cat_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- responsible area -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Responsible area</mat-label>
                    <mat-select formControlName="responsible_report">
                        <mat-option *ngFor="let res_rep of responsible_report" [value]="res_rep.value">
                            {{res_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- problem -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Problem</mat-label>
                    <input matInput type="text" formControlName="problem" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- Hub site -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Hub Site</mat-label>
                    <input matInput type="text" formControlName="hubSite" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- Type of Generator -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Type of generator</mat-label>
                    <mat-select formControlName="generator">
                        <mat-option *ngFor="let gen of generator" [value]="gen.value">
                            {{gen.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- effect option -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Эффект</mat-label>
                    <mat-select formControlName="effect_option">
                        <mat-option *ngFor="let eff_rep of effect_option" [value]="eff_rep.value">
                            {{eff_rep.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- reason -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Reason</mat-label>
                    <input matInput type="text" formControlName="reason" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- region -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Region</mat-label>
                    <mat-select formControlName="region">
                        <mat-option *ngFor="let reg of region" [value]="reg.value">
                            {{reg.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <!-- desc -->
            <mat-grid-tile colspan="4">
                <mat-form-field class="margin-container">
                    <mat-label>Description</mat-label>
                    <input matInput type="text" formControlName="desc" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- informed -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Informed</mat-label>
                    <input matInput type="text" formControlName="informed" />
                </mat-form-field>
            </mat-grid-tile>
            <!-- category -->
            <mat-grid-tile colspan="2">
                <mat-form-field class="margin-container">
                    <mat-label>Category</mat-label>
                    <mat-select formControlName="category">
                        <mat-option *ngFor="let cat of category" [value]="cat.value">
                            {{cat.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list cols="12">
            <!-- powerOff Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Power Off Time</p>
                    <input type="datetime-local" class="dateTime" name="startTime" formControlName="powerOffTime">
                </div>
            </mat-grid-tile>
            <!-- HubSiteBlock Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Hub Site Block Time</p>
                    <input type="datetime-local" class="dateTime" formControlName="hubBlockTime">
                </div>
            </mat-grid-tile>
            <!-- start Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>Start Time</p>
                    <input type="datetime-local" class="dateTime" name="startTime" formControlName="startTime">
                </div>
            </mat-grid-tile>
            <!-- end Time -->
            <mat-grid-tile colspan="3">
                <div class="margin-container">
                    <p>End Time</p>
                    <input type="datetime-local" class="dateTime" formControlName="endTime">
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <!-- button -->
        <mat-grid-list cols="12">
            <mat-grid-tile colspan="1">
                <button class="form-button" mat-raised-button color="primary" type="button"
                    (click)="previewButton()">Preview</button>
            </mat-grid-tile>
            <mat-grid-tile colspan="3">
                <mat-chip-listbox formControlName="AddOrCor">
                    <mat-chip-option value="correction">Correction</mat-chip-option>
                    <mat-chip-option value="addition">Additional</mat-chip-option>
                </mat-chip-listbox>
            </mat-grid-tile>

        </mat-grid-list>
    </form>
    <!-- preview -->
    <div class="grid-container">
        <div class="grid-item" *ngIf="preview == true">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>{{hubForm.value.level + ' HUB sayt: Problema: '}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Effekt: Poterya pokrytiya i kachestva svyazi v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Problem')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <!-- <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Problem')" type="submit" *ngIf="newForm == false">Update
                    </button> -->
                </mat-card-actions>
            </mat-card>
        </div>
        <div class="grid-item" *ngIf="previewResheniya == true && hubForm.value.endTime != null">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>{{hubForm.value.level + ' HUB sayt: Reshenie:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Opisanie: ' + hubForm.value.desc}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime}}</p>
                    <p>{{'Konec: ' + hubForm.value.endTime}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Reshenie')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Reshenie')" type="submit" *ngIf="newForm == false">Update
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
        <div class="grid-item" *ngIf="previewResheniya == true && hubForm.value.endTime != null">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>{{hubForm.value.level + ' HUB sayt: Informacionnoe:'}}</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'addition'">(Additional)</mat-card-title>
                    <mat-card-title *ngIf="hubForm.value.AddOrCor == 'correction'">(Correction)</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>{{hubForm.value.problem + ' saytov ne rabotayut v ' + hubForm.value.region}}</p>
                    <p>{{'Prichina: ' + hubForm.value.reason}}</p>
                    <p>{{'Opisanie: ' + hubForm.value.desc}}</p>
                    <p>{{'Vremya otklyucheniya EP: ' + hubForm.value.powerOffTime}}</p>
                    <p>{{'Vremya blokirovki sektorov: ' + hubForm.value.hubBlockTime}}</p>
                    <p>{{'Opoveschen: ' + hubForm.value.informed}}</p>
                    <p>{{'Nachalo: ' + hubForm.value.startTime}}</p>
                    <p>{{'Konec: ' + hubForm.value.endTime}}</p>
                    <p>{{'Otpravil: ' + user.username}}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonProblem('Informacionnoe')" type="submit" *ngIf="newForm == true">Submit
                    </button>
                    <button class="form-button" mat-raised-button color="primary"
                        (click)="onSubmitButtonUpdate('Informacionnoe')" type="submit" *ngIf="newForm == false">Update
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>